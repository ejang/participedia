:root{
  --bg:#0b0d12;
  --card:#121624;
  --card2:#0f1320;
  --text:#e8ebf2;
  --muted:#a7b0c3;
  --line:#26304a;
  --accent:#8ab4ff;
  --accent2:#7ee3c2;
  --highlight: rgba(255, 255, 0, 0.3);
  --modal-overlay: rgba(0, 0, 0, 0.7);
}

/* 라이트 모드 변수 */
body.light-mode {
  --bg: #f4f6f9;
  --card: #ffffff;
  --card2: #f8f9fa;
  --text: #212529;
  --muted: #6c757d;
  --line: #dee2e6;
  --accent: #2271b1;
  --accent2: #008a63;
  --highlight: rgba(255, 235, 59, 0.5);
  --modal-overlay: rgba(0, 0, 0, 0.4);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, "Apple SD Gothic Neo","Noto Sans KR", "Malgun Gothic", Segoe UI, Roboto, Helvetica, Arial;
  color:var(--text);
  background: var(--bg);
  background-image: radial-gradient(1200px 800px at 10% -10%, rgba(26,36,80, 0.3) 0%, transparent 60%),
                    radial-gradient(1000px 700px at 110% 10%, rgba(23,59,52, 0.3) 0%, transparent 55%);
  background-attachment: fixed;
  transition: background-color 0.3s, color 0.3s;
}

.wrap{max-width:1100px;margin:0 auto;padding:0 18px}
.top{
  position:sticky; top:0; z-index:10;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  background: rgba(var(--bg),0.85);
  border-bottom:1px solid var(--line);
  transition: background 0.3s, border-color 0.3s;
}
@media (prefers-color-scheme: dark) {
  body:not(.light-mode) .top { background: rgba(11,13,18,0.85); }
}
body.light-mode .top { background: rgba(244,246,249, 0.85); }


.brand-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 18px 0 8px;
}
.brand{display:flex;gap:12px;align-items:center;}
.logo{
  width:42px;height:42px;border-radius:14px;
  display:grid;place-items:center;
  background: linear-gradient(135deg, rgba(138,180,255,0.25), rgba(126,227,194,0.18));
  border:1px solid rgba(138,180,255,0.25);
  color:var(--accent);
  font-size:18px;
}
h1{margin:0;font-size:20px;letter-spacing:-0.2px}
.sub{margin:4px 0 0;color:var(--muted);font-size:13px}

.controls{
  display:grid;
  grid-template-columns: 1.6fr 1fr 1fr 1fr auto;
  gap:10px;
  padding:10px 0 10px;
  align-items: end;
}
.field{display:flex;flex-direction:column;gap:6px}
.label{font-size:12px;color:var(--muted)}
input[type="search"], select{
  width:100%;
  border-radius:12px;
  border:1px solid var(--line);
  background: var(--card2);
  color:var(--text);
  padding:10px 12px;
  outline:none;
  transition: border-color 0.2s;
}
input[type="search"]:focus, select:focus{
  border-color: var(--accent);
  box-shadow: 0 0 0 1px var(--accent);
}
.field.file{grid-column: 1 / -1;}
.field.file input{
  padding:10px 12px;
  border-radius:12px;
  border:1px dashed var(--line);
  background: var(--card2);
  color: var(--muted);
}

.hint{font-size:12px;color:var(--muted)}
.hint code{color:var(--accent);background:rgba(138,180,255,0.1);padding:2px 6px;border-radius:8px}
body.light-mode .hint code { background: rgba(34, 113, 177, 0.1); }

.meta{display:flex;gap:8px;align-items:center;padding:0 0 14px}
.pill{
  font-size:12px;color:var(--text);
  background: var(--card2);
  border:1px solid var(--line);
  padding:6px 10px;border-radius:999px;
}
.pill.secondary{color:var(--muted)}

.grid{
  display:grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap:12px;
  padding:18px 0 28px;
}

@media (max-width: 980px){
  .controls{grid-template-columns:1fr 1fr 1fr}
  .field.file { grid-column: 1 / -1; }
  .actions { grid-column: 1 / -1; }
  .grid{grid-template-columns: repeat(2, minmax(0, 1fr))}
}
@media (max-width: 620px){
  .controls{grid-template-columns:1fr 1fr}
  .grid{grid-template-columns: 1fr}
  .actions { grid-column: 1 / -1; width: 100%; }
  .btn-reset { width: 100%; }
}

.card{
  border-radius:18px;
  background: var(--card);
  border:1px solid var(--line);
  overflow:hidden;
  display:flex;
  flex-direction:column;
  min-height: 190px;
  transition: transform 0.2s, box-shadow 0.2s, background-color 0.3s;
}
.card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.card .head{padding:14px 14px 10px;display:flex;flex-direction:column;gap:8px}
.badges{display:flex;flex-wrap:wrap;gap:6px}
.badge{
  font-size:11px;padding:4px 8px;border-radius:999px;
  border:1px solid var(--line);
  color:var(--muted);background: var(--card2);
}
.badge.accent{color:var(--accent);border-color:var(--accent);background:rgba(138,180,255,0.08)}
body.light-mode .badge.accent { background: rgba(34, 113, 177, 0.08); }

.badge.green{color:var(--accent2);border-color:var(--accent2);background:rgba(126,227,194,0.07)}
body.light-mode .badge.green { background: rgba(0, 138, 99, 0.07); }

.title{font-size:15px;line-height:1.35;letter-spacing:-0.2px;margin:0; color: var(--text);}
.desc{
  color:var(--muted);font-size:13px;line-height:1.55;margin:0;
  display:-webkit-box;-webkit-line-clamp: 4;-webkit-box-orient: vertical;overflow:hidden;
}
.card .foot{
  margin-top:auto;padding:12px 14px 14px;
  border-top:1px solid var(--line);
  display:flex;justify-content:space-between;align-items:center;gap:10px;
}
a.btn, button.btn{
  text-decoration:none;color:var(--text);
  background: var(--card2);
  border:1px solid var(--line);
  padding:8px 12px;border-radius:12px;font-size:12px;
  cursor: pointer;
  display: inline-block;
}
a.btn:hover, button.btn:hover{background: var(--bg); border-color: var(--accent);}
.btn.primary {
  background: var(--accent);
  color: #fff;
  border-color: var(--accent);
}
.btn.primary:hover { opacity: 0.9; }

.small{font-size:12px;color:var(--muted); flex: 1; margin-right: 10px; display: flex; flex-wrap: wrap; gap: 4px; }

/* 태그 스타일 - 알약(Pill) 형태 */
.tag-pill {
  display: inline-block;
  padding: 3px 8px;
  border-radius: 6px;
  font-size: 11px;
  margin: 2px 4px 2px 0;
  cursor: pointer;
  transition: opacity 0.2s, transform 0.1s;
  background-color: var(--card2);
  border: 1px solid var(--line);
  color: var(--muted);
  line-height: 1.4;
}
.tag-pill:hover {
  opacity: 0.8;
  transform: translateY(-1px);
}
.tag-pill::before { content: "#"; opacity: 0.5; margin-right: 2px; }

/* 태그 색상 팔레트 (JS에서 해시로 할당) */
/* 다크 모드용 파스텔 톤 */
.tag-c0 { background: rgba(255, 99, 71, 0.15); color: #ff8c7a; border-color: rgba(255, 99, 71, 0.3); }
.tag-c1 { background: rgba(255, 165, 0, 0.15); color: #ffb74d; border-color: rgba(255, 165, 0, 0.3); }
.tag-c2 { background: rgba(255, 215, 0, 0.15); color: #ffd700; border-color: rgba(255, 215, 0, 0.3); }
.tag-c3 { background: rgba(50, 205, 50, 0.15); color: #90ee90; border-color: rgba(50, 205, 50, 0.3); }
.tag-c4 { background: rgba(64, 224, 208, 0.15); color: #40e0d0; border-color: rgba(64, 224, 208, 0.3); }
.tag-c5 { background: rgba(30, 144, 255, 0.15); color: #87cefa; border-color: rgba(30, 144, 255, 0.3); }
.tag-c6 { background: rgba(138, 43, 226, 0.15); color: #dda0dd; border-color: rgba(138, 43, 226, 0.3); }
.tag-c7 { background: rgba(255, 105, 180, 0.15); color: #ffb6c1; border-color: rgba(255, 105, 180, 0.3); }

/* 라이트 모드용 짙은 톤 */
body.light-mode .tag-c0 { color: #d32f2f; background: rgba(211, 47, 47, 0.1); border-color: rgba(211, 47, 47, 0.2); }
body.light-mode .tag-c1 { color: #f57c00; background: rgba(245, 124, 0, 0.1); border-color: rgba(245, 124, 0, 0.2); }
body.light-mode .tag-c2 { color: #fbc02d; background: rgba(251, 192, 45, 0.1); border-color: rgba(251, 192, 45, 0.2); }
body.light-mode .tag-c3 { color: #388e3c; background: rgba(56, 142, 60, 0.1); border-color: rgba(56, 142, 60, 0.2); }
body.light-mode .tag-c4 { color: #0097a7; background: rgba(0, 151, 167, 0.1); border-color: rgba(0, 151, 167, 0.2); }
body.light-mode .tag-c5 { color: #1976d2; background: rgba(25, 118, 210, 0.1); border-color: rgba(25, 118, 210, 0.2); }
body.light-mode .tag-c6 { color: #7b1fa2; background: rgba(123, 31, 162, 0.1); border-color: rgba(123, 31, 162, 0.2); }
body.light-mode .tag-c7 { color: #c2185b; background: rgba(194, 24, 91, 0.1); border-color: rgba(194, 24, 91, 0.2); }


.empty{padding:40px 0 60px;text-align:center;color:var(--muted)}
.foot{padding:18px 0 28px;color:var(--muted);font-size:12px}

/* 로딩 스피너 */
.loader {
  padding: 40px;
  text-align: center;
  color: var(--muted);
  display: none; 
}
.loader.active { display: block; }
.spinner {
  width: 30px; height: 30px;
  border: 3px solid var(--line);
  border-top-color: var(--accent);
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin: 0 auto 10px;
}
@keyframes spin { to { transform: rotate(360deg); } }

.btn-icon {
  background: none; border: none; font-size: 20px; cursor: pointer; padding: 4px;
  border-radius: 50%; transition: background 0.2s; color: var(--text);
}
.btn-icon:hover { background: var(--card2); }

.btn-reset {
  height: 38px;
  border: 1px solid var(--line);
  background: var(--card2);
  color: var(--muted);
  border-radius: 12px;
  cursor: pointer;
  padding: 0 12px;
  font-size: 13px;
}
.btn-reset:hover { color: var(--text); border-color: var(--text); }

.btn-top {
  position: fixed; bottom: 20px; right: 20px;
  width: 44px; height: 44px;
  border-radius: 50%;
  background: var(--accent);
  color: #fff;
  border: none;
  font-size: 20px;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  z-index: 100;
  display: grid; place-items: center;
  transition: transform 0.2s, opacity 0.2s;
}
.btn-top:hover { transform: translateY(-3px); }
.btn-top[hidden] { opacity: 0; pointer-events: none; display: grid; }

mark.highlight {
  background-color: var(--highlight);
  color: inherit;
  padding: 0 2px;
  border-radius: 2px;
}

/* 모달 스타일 */
dialog.modal {
  border: none;
  background: transparent;
  padding: 0;
  width: 100%;
  max-width: 600px;
  margin: auto;
  color: var(--text);
}
dialog::backdrop {
  background: var(--modal-overlay);
  backdrop-filter: blur(2px);
}
.modal-inner {
  background: var(--card);
  border-radius: 20px;
  border: 1px solid var(--line);
  box-shadow: 0 20px 40px rgba(0,0,0,0.3);
  display: flex;
  flex-direction: column;
  max-height: 85vh;
  animation: modalPop 0.2s ease-out;
}
@keyframes modalPop {
  from { transform: scale(0.95); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

.modal-head {
  padding: 16px 20px;
  border-bottom: 1px solid var(--line);
  display: flex;
  justify-content: space-between;
  align-items: start;
  gap: 10px;
}
.modal-title {
  margin: 0;
  font-size: 18px;
  line-height: 1.4;
  word-break: keep-all;
}
.modal-body {
  padding: 20px;
  overflow-y: auto;
  line-height: 1.6;
}
.modal-foot {
  padding: 16px 20px;
  border-top: 1px solid var(--line);
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.section { margin-bottom: 24px; }
.section-title {
  font-size: 14px; color: var(--muted);
  margin: 0 0 8px; text-transform: uppercase; letter-spacing: 0.5px;
}
.modal-text {
  margin: 0; font-size: 15px; color: var(--text);
  white-space: pre-line; /* 줄바꿈 유지 */
}
.meta-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}
.meta-item {
  background: var(--card2);
  padding: 10px;
  border-radius: 8px;
}
.meta-label { font-size: 11px; color: var(--muted); display: block; margin-bottom: 4px; }
.meta-val { font-size: 13px; color: var(--text); font-weight: 500; }
.mb-4 { margin-bottom: 16px; }

@media (max-width: 600px) {
  dialog.modal { max-width: 90%; }
  .meta-grid { grid-template-columns: 1fr; }
}
